import{u as j,a as D,i as z,b as G,c as T,r as I,d as h,w as F,e as M,f,g as r,h as o,j as a,k as i,l as R,m as d,n as q,F as v,o as s,V as w,p as g,q as C,s as y,t as k,v as b,x as E}from"./index-CtGu8mJB.js";import{V as P,a as B,b as H,c as J}from"./VNavigationDrawer-CFxRk-gL.js";import{V as A}from"./VContainer-D7KpNIx8.js";import{V as x,a as V}from"./VList-Bp6MNQw8.js";import{V as K}from"./VDivider-Clkfh6wC.js";const O={class:"d-flex mr-6"},Q={class:"d-flex justify-space-between align-center"},oe={__name:"admin",setup(W){const{t:l}=j(),t=D(),N=z(),{mdAndUp:p}=G(),S=T(),c=I(!1),u=I(!1),L=h(()=>[{to:"/group",text:l("nav.groupList"),icon:"mdi-invoice-list-outline",show:t.isLoggedIn||!t.isLoggedIn},{to:"/creategroup/step1",text:l("nav.groupCreate"),icon:"mdi-flag-outline",show:t.isLoggedIn||!t.isLoggedIn},{to:"/member",text:l("nav.membersSection"),icon:"mdi-account-group",show:t.isLoggedIn},{to:"/admin",text:l("nav.adminSection"),icon:"mdi-cog",show:t.isLoggedIn&&t.isAdmin},{to:"/contact",text:l("nav.contactUs"),icon:"mdi-chat",show:t.isLoggedIn||!t.isLoggedIn},{to:"/login",text:l("nav.login"),icon:"mdi-account-arrow-left",show:!t.isLoggedIn},{to:"/register",text:l("nav.register"),icon:"mdi-account-plus",show:!t.isLoggedIn}]),U=h(()=>[{to:"/admin/groups",text:l("nav.adminGroups")},{to:"/admin/users",text:l("nav.adminUsers")},{to:"/admin/contacts",text:l("nav.adminContacts")}]),_=async()=>{try{await apiAuth.delete("/user/logout")}catch(m){console.log(m)}t.logout(),N({text:l("logout.success"),snackbarProps:{color:"green"}}),c.value=!1,S.push("/")};return F(p,m=>{console.log(m),m&&(c.value&&(c.value=!1),u.value&&(u.value=!1)),m||u.value||(u.value=!0)}),(m,n)=>{const $=M("router-view");return s(),f(v,null,[r(P,null,{default:o(()=>[a(p)?(s(),i(A,{key:0,class:"d-flex justify-space-between align-center",fluid:""},{default:o(()=>[r(w,{to:"/",active:!1,class:"ml-2"},{default:o(()=>n[5]||(n[5]=[g("Game Together")])),_:1}),C("div",O,[(s(!0),f(v,null,y(L.value,e=>(s(),f(v,{key:e.to},[e.show?(s(),i(w,{key:0,to:e.to,"prepend-icon":e.icon},{default:o(()=>[g(k(e.text),1)]),_:2},1032,["to","prepend-icon"])):d("",!0)],64))),128)),a(t).isLoggedIn?(s(),i(w,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:_},{default:o(()=>[g(k(m.$t("nav.logout")),1)]),_:1})):d("",!0),r(b,{border:"xs",image:a(t).avatar},null,8,["image"])])]),_:1})):d("",!0),a(p)?d("",!0):(s(),i(A,{key:1,class:"d-flex justify-space-between align-center",fluid:""},{default:o(()=>[r(w,{to:"/",active:!1,class:"ml-2"},{default:o(()=>n[6]||(n[6]=[g("Game Together")])),_:1}),r(J,{onClick:n[0]||(n[0]=e=>c.value=!a(c))})]),_:1}))]),_:1}),a(p)?d("",!0):(s(),i(B,{key:0,modelValue:a(c),"onUpdate:modelValue":n[2]||(n[2]=e=>R(c)?c.value=e:null),temporary:"",location:"top"},{default:o(()=>[r(V,null,{default:o(()=>[(s(!0),f(v,null,y(L.value,e=>(s(),f(v,null,[e.show?(s(),i(x,{key:0,to:e.to,"prepend-icon":e.icon},{default:o(()=>[g(k(e.text),1)]),_:2},1032,["to","prepend-icon"])):d("",!0)],64))),256)),a(t).isLoggedIn?(s(),i(x,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:n[1]||(n[1]=()=>{_(),c.value=!1})},{default:o(()=>[g(k(m.$t("nav.logout")),1)]),_:1})):d("",!0)]),_:1})]),_:1},8,["modelValue"])),r(B,{permanent:"",rail:a(u),"rail-width":"90",drawer:"drawer",onClick:n[4]||(n[4]=e=>a(p)?null:u.value=!1),width:"260",class:q({"cursor-pointer":a(u)})},{default:o(()=>[a(u)?(s(),i(V,{key:0},{default:o(()=>[r(x,null,{default:o(()=>[r(b,{image:a(t).avatar,size:"40"},null,8,["image"])]),_:1})]),_:1})):d("",!0),a(u)?d("",!0):(s(),i(V,{key:1},{default:o(()=>[C("div",Q,[r(x,{"prepend-avatar":a(t).avatar,title:a(t).nickname},null,8,["prepend-avatar","title"]),a(p)?d("",!0):(s(),i(w,{key:0,icon:"mdi-chevron-left",size:"40",variant:"text",onClick:n[3]||(n[3]=E(e=>u.value=!0,["stop"]))}))]),r(K),(s(!0),f(v,null,y(U.value,e=>(s(),i(x,{key:e.to,to:e.to},{default:o(()=>[g(k(e.text),1)]),_:2},1032,["to"]))),128))]),_:1}))]),_:1},8,["rail","class"]),r(H,null,{default:o(()=>[r($)]),_:1})],64)}}};export{oe as default};
