import{aB as ce,c as pe,u as me,r as i,d as C,o as r,f as x,g as a,h as n,q as s,ao as A,A as R,V as b,t as z,v as J,j as f,F as y,s as q,k as G,ap as F,au as I,m as W,ar as H,as as K,at as Q,av as X,aw as fe,y as ge}from"./index-DVfOWEx5.js";import{_ as ve}from"./GroupCard-BJhFT01e.js";import{G as he}from"./GroupFooter-BuTwADX5.js";import{u as xe}from"./areaData-DmBddeXQ.js";import{b as Y}from"./route-block-B_A1xBdJ.js";import{V as ye,a as _}from"./VRow-CivNAKJQ.js";import{V as _e}from"./VMenu-i7v0VxXu.js";import{V as we,a as Z,b as ee}from"./VHover-SEKKqLOc.js";import{V as be}from"./VSelect-CdA3liUS.js";import{V as Ve}from"./VPagination-4J9SdRtY.js";import{V as ke}from"./VContainer-D1UvRGL3.js";import{V as P}from"./VDivider-BFKobfYd.js";import"./VChip-Da2BWmOA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VList-Deogpg8L.js";import"./VSheet-CLQXPtg8.js";const De={class:"group__search-filters d-flex flex-wrap"},Ce={class:"d-flex group__search-bar flex-wrap"},Ae={class:"d-flex justify-space-between align-center group__search-select"},Re={style:{"font-size":"20px"}},qe={class:"d-flex align-center"},Ge={style:{"max-width":"954px"}},Pe={style:{"max-width":"954px"}},Ue={style:{"max-width":"954px"}},Oe={class:"d-flex",style:{width:"850px"}},Se={class:"mt-3 mr-3",style:{"font-size":"18px"}},je={class:"d-flex flex-wrap custom-input",style:{width:"750px"}},ze={class:"d-flex flex-wrap",style:{width:"750px"}},E=3,Fe={__name:"index",setup(Ie){const{api:N}=ge(),u=ce(),U=pe(),{area_data:T}=xe(),{t}=me(),p=i(1),te=C(()=>{const l=g.value.filter(e=>{const o=new Date;return new Date(e.time)>o});return Math.ceil(l.length/E)}),ae=()=>{U.replace({path:u.path,query:{page:p.value}})},O=i(0),g=i([]),v=i(""),B=i(""),le=C(()=>[{title:"揪團時間: 由近到遠",value:0},{title:"揪團時間: 由遠到近",value:1},{title:"建立時間: 由舊到新",value:2},{title:"建立時間: 由新到舊",value:3},{title:"人數上限: 由少到多",value:4},{title:"人數上限: 由多到少",value:5},{title:"參加人數: 由少到多",value:6},{title:"參加人數: 由多到少",value:7}]),oe={0:(l,e)=>new Date(l.time)-new Date(e.time),1:(l,e)=>new Date(e.time)-new Date(l.time),2:(l,e)=>new Date(l.createdAt)-new Date(e.createdAt),3:(l,e)=>new Date(e.createdAt)-new Date(l.createdAt),4:(l,e)=>l.member_limit-e.member_limit,5:(l,e)=>e.member_limit-l.member_limit,6:(l,e)=>l.member_count-e.member_count,7:(l,e)=>e.member_count-l.member_count},$=C(()=>g.value.filter(e=>{const o=new Date;return new Date(e.time)>o}).sort(oe[O.value]).slice((p.value-1)*E,p.value*E));(async()=>{try{console.log(u.query);const{data:l}=await N.post("/group/search",{search:u.query.search?JSON.parse(decodeURIComponent(u.query.search)):void 0,city:u.query.city?JSON.parse(decodeURIComponent(u.query.city)):void 0,region:u.query.region?JSON.parse(decodeURIComponent(u.query.region)):void 0,tags:u.query.tags?JSON.parse(decodeURIComponent(u.query.tags)):void 0,time:u.query.time||void 0});g.value=l.result,U.replace({path:u.path,query:{page:p.value}}),console.log(g.value)}catch(l){console.log(l),g.value=[]}})();const V=async()=>{try{const l=k.value.map(c=>t("area."+c.city)+c.district),e=h.value?new Date(h.value).toLocaleDateString():void 0;console.log(v.value.length),B.value=v.value;const{data:o}=await N.post("/group/search",{search:v.value?v.value:void 0,city:l.length?l.join(","):void 0,region:l.length?l.join(","):void 0,tags:w.value.length?w.value:void 0,time:e});console.log(o),g.value=o.result,U.replace({path:u.path,query:{page:p.value}}),M()}catch(l){console.log(l)}},ne=C(()=>[{text:t("area.taipei"),value:"taipei"},{text:t("area.newTaipei"),value:"newTaipei"},{text:t("area.keeLung"),value:"keeLung"},{text:t("area.taoyuan"),value:"taoyuan"},{text:t("area.hsinchuCounty"),value:"hsinchuCounty"},{text:t("area.hsinchu"),value:"hsinchu"},{text:t("area.miaoli"),value:"miaoli"},{text:t("area.taichung"),value:"taichung"},{text:t("area.nantou"),value:"nantou"},{text:t("area.changhua"),value:"changhua"},{text:t("area.yunlin"),value:"yunlin"},{text:t("area.chiayi"),value:"chiayi"},{text:t("area.chiayiCounty"),value:"chiayiCounty"},{text:t("area.tainan"),value:"tainan"},{text:t("area.kaohsiung"),value:"kaohsiung"},{text:t("area.pingtung"),value:"pingtung"},{text:t("area.yilan"),value:"yilan"},{text:t("area.hualien"),value:"hualien"},{text:t("area.taitung"),value:"taitung"},{text:t("area.penghu"),value:"penghu"},{text:t("area.kinmen"),value:"kinmen"},{text:t("area.lienchiang"),value:"lienchiang"}]),se=[{text:t("tag.computer"),value:t("tag.computer")},{text:t("tag.mobile"),value:t("tag.mobile")},{text:t("tag.console"),value:t("tag.console")},{text:t("tag.virtualReality"),value:t("tag.virtualReality")},{text:t("tag.augmentedReality"),value:t("tag.augmentedReality")},{text:t("tag.webGame"),value:t("tag.webGame")},{text:t("tag.Adventure"),value:t("tag.Adventure")},{text:t("tag.RPG"),value:t("tag.RPG")},{text:t("tag.simulation"),value:t("tag.simulation")},{text:t("tag.sportsAndRacing"),value:t("tag.sportsAndRacing")},{text:t("tag.puzzleAndParty"),value:t("tag.puzzleAndParty")},{text:t("tag.musicAndRhythm"),value:t("tag.musicAndRhythm")},{text:t("tag.sandboxAndOpenWorld"),value:t("tag.sandboxAndOpenWorld")},{text:t("tag.scienceFictionAndFantasy"),value:t("tag.scienceFictionAndFantasy")},{text:t("tag.EducationAndExperimental"),value:t("tag.EducationAndExperimental")},{text:t("tag.massiveMultiplayer"),value:t("tag.massiveMultiplayer")}],d=i({open:!1,type:1}),L=async l=>{d.value.type=l,d.value.open=!0},M=()=>{d.value.open=!1,k.value=[],w.value=[]},k=i([]),w=i([]),S=i(!1),h=i(null),ue=l=>{try{if(!l)return;h.value=l,S.value=!1;const e=new Date(l).toLocaleDateString();console.log(e),V(),h.value=null}catch(e){console.log("日期格式錯誤:",e)}};return(l,e)=>(r(),x(y,null,[a(ke,{style:{"min-height":"100vh","max-width":"1440px"},class:"mt-13"},{default:n(()=>[a(ye,null,{default:n(()=>[a(_,{cols:"10",offset:"1","offset-sm":"1","offset-md":"1","offset-lg":"2"},{default:n(()=>[s("div",De,[a(A,{"append-inner-icon":"mdi-plus-circle",variant:"solo",placeholder:"選擇",class:"group__search-input group__search-input-click","persistent-placeholder":"",prefix:"地區",readonly:"",onClick:e[0]||(e[0]=o=>L(1))}),a(A,{"append-inner-icon":"mdi-plus-circle",variant:"solo",placeholder:"選擇",class:"group__search-input group__search-input-click","persistent-placeholder":"",prefix:"標籤",readonly:"",onClick:e[1]||(e[1]=o=>L(2))}),a(_e,{modelValue:S.value,"onUpdate:modelValue":e[3]||(e[3]=o=>S.value=o),"close-on-content-click":!1},{activator:n(({props:o})=>[a(A,R(o,{"append-inner-icon":"mdi-plus-circle",variant:"solo",placeholder:"選擇",class:"group__search-input group__search-input-click","persistent-placeholder":"",prefix:"日期",readonly:""}),null,16)]),default:n(()=>[a(we,{modelValue:h.value,"onUpdate:modelValue":[e[2]||(e[2]=o=>h.value=o),ue],"show-adjacent-months":"",landscape:"","hide-header":""},null,8,["modelValue"])]),_:1},8,["modelValue"])])]),_:1}),a(_,{cols:"10",offset:"1","offset-sm":"1","offset-md":"1","offset-lg":"2"},{default:n(()=>[s("div",Ce,[a(A,{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=o=>v.value=o),variant:"solo",placeholder:"縣市區、遊戲類型等",class:"group__search-input","persistent-placeholder":"",prefix:"關鍵字"},null,8,["modelValue"]),a(b,{height:50,style:{"font-size":"18px","border-radius":"8px"},"base-color":"orange",onClick:V,block:""},{default:n(()=>e[11]||(e[11]=[z("搜尋")])),_:1})])]),_:1}),a(_,{cols:"10",offset:"1","offset-sm":"1","offset-md":"1","offset-lg":"2"},{default:n(()=>[s("div",Ae,[s("span",Re,J(B.value)+" 搜尋結果",1),s("div",qe,[e[12]||(e[12]=s("span",{class:"font-weight-bold"},"排序:",-1)),a(be,{items:f(le),"item-title":"title","item-value":"value",modelValue:O.value,"onUpdate:modelValue":e[5]||(e[5]=o=>O.value=o),variant:"solo",flat:"",class:"group__select"},null,8,["items","modelValue"])])])]),_:1}),(r(!0),x(y,null,q(f($),o=>(r(),G(_,{cols:"10",offset:"1","offset-sm":"1","offset-md":"1","offset-lg":"2",key:o._id},{default:n(()=>[s("div",Ge,[a(ve,R({ref_for:!0},o),null,16),a(P,{class:"mb-3"})])]),_:2},1024))),128)),f($).length===0?(r(),G(_,{key:0,cols:"10",offset:"1","offset-sm":"1","offset-md":"1","offset-lg":"2"},{default:n(()=>[s("div",Pe,[a(F,{height:"200",style:{"box-shadow":"none"}},{default:n(()=>[a(I,{"max-width":"576",class:"d-flex justify-center align-center flex-column h-100"},{default:n(()=>e[13]||(e[13]=[s("p",{class:"font-weight-bold text-h5"},"未找到符合條件的搜尋",-1),s("p",{class:"font-weight-bold text-h5"},"請更改您的搜尋條件並重新搜尋",-1)])),_:1})]),_:1})])]),_:1})):W("",!0),a(_,{cols:"10",offset:"1","offset-sm":"1","offset-md":"1","offset-lg":"2"},{default:n(()=>[s("div",Ue,[a(Ve,{modelValue:p.value,"onUpdate:modelValue":[e[6]||(e[6]=o=>p.value=o),ae],length:f(te),class:"mt-8 mb-8 group__pagination"},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1}),a(he),a(fe,{modelValue:d.value.open,"onUpdate:modelValue":e[10]||(e[10]=o=>d.value.open=o),width:"1000",scrollable:"",eager:""},{default:n(()=>[H(a(F,null,{default:n(()=>[a(Q,{class:"d-flex mb-0 pb-0"},{default:n(()=>[e[14]||(e[14]=s("div",{class:"d-flex w-100 justify-center align-center"},[s("span",{class:"font-weight-bold",style:{"font-size":"20px"}},"按縣市搜尋")],-1)),a(b,{icon:"mdi-close",variant:"text",onClick:M})]),_:1}),a(P,{class:"mt-3"}),a(I,{class:"d-flex flex-column align-center pt-0 mb-2 font-weight-bold"},{default:n(()=>[(r(!0),x(y,null,q(Object.entries(f(T)),([o,c],j)=>{var D;return r(),x(y,{key:o},[s("div",Oe,[s("span",Se,J(((D=f(ne).find(m=>m.value===o))==null?void 0:D.text)||o),1),s("div",je,[(r(!0),x(y,null,q(c,m=>(r(),G(Z,{key:`${o}-${m}`},{default:n(({isHovering:ie,props:re})=>[a(ee,R({ref_for:!0},re,{modelValue:k.value,"onUpdate:modelValue":e[7]||(e[7]=de=>k.value=de),label:m,value:{city:o,district:m},"hide-details":"",density:"compact","false-icon":ie?" mdi-checkbox-outline":"mdi-checkbox-blank-outline","true-icon":"mdi-checkbox-marked",color:"orange"}),null,16,["modelValue","label","value","false-icon"])]),_:2},1024))),128))])]),j!==Object.entries(f(T)).length-1?(r(),G(P,{key:0,style:{width:"850px"}})):W("",!0)],64)}),128))]),_:1}),a(X,{class:"bg-orange pa-0"},{default:n(()=>[a(b,{onClick:V,class:"w-100 font-weight-bold",style:{height:"54px"},color:"white"},{default:n(()=>e[15]||(e[15]=[z("搜尋")])),_:1})]),_:1})]),_:1},512),[[K,d.value.type===1]]),H(a(F,{width:"1000"},{default:n(()=>[a(Q,{class:"d-flex mb-0 pb-0"},{default:n(()=>[e[16]||(e[16]=s("div",{class:"d-flex w-100 justify-center align-center"},[s("span",{class:"font-weight-bold",style:{"font-size":"20px"}},"按標籤搜尋")],-1)),a(b,{icon:"mdi-close",variant:"text",onClick:e[8]||(e[8]=o=>d.value.open=!1)})]),_:1}),a(P,{class:"mt-3"}),a(I,{class:"d-flex flex-column align-center pt-0 mb-2 font-weight-bold"},{default:n(()=>[s("div",ze,[(r(),x(y,null,q(se,(o,c)=>s("div",{key:c,style:{width:"170px",height:"30px"}},[a(Z,null,{default:n(({isHovering:j,props:D})=>[a(ee,R({ref_for:!0},D,{modelValue:w.value,"onUpdate:modelValue":e[9]||(e[9]=m=>w.value=m),label:o.text,value:o.value,"hide-details":"",density:"compact","false-icon":j?" mdi-checkbox-outline":"mdi-checkbox-blank-outline","true-icon":"mdi-checkbox-marked",color:"orange"}),null,16,["modelValue","label","value","false-icon"])]),_:2},1024)])),64))])]),_:1}),a(X,{class:"bg-orange pa-0"},{default:n(()=>[a(b,{onClick:V,class:"w-100 font-weight-bold",style:{height:"54px"},color:"white"},{default:n(()=>e[17]||(e[17]=[z("搜尋")])),_:1})]),_:1})]),_:1},512),[[K,d.value.type===2]])]),_:1},8,["modelValue"])],64))}};typeof Y=="function"&&Y(Fe);export{Fe as default};
