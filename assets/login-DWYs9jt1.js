import{u as F,i as $,c as q,a as B,n as d,f as h,g as a,h as r,U as C,aY as T,j as e,k as z,q as m,v as p,ap as b,V as I,t as N,ay as R,m as V,x as U,F as M,y as j}from"./index-BeWqMiDO.js";import{_ as A}from"./swiper-2-b8GkgFeR.js";import{c as D,a as v,u as G,e as w}from"./index.esm-D0-76OHx.js";import{v as L}from"./index-BhYhnoVD.js";import Y from"./GroupFooter-DmUcTms5.js";import{b as _}from"./route-block-B_A1xBdJ.js";import{V as H,a as x}from"./VRow-5AEAAvvs.js";import{V as J}from"./VSheet-D5XMIAGU.js";import{V as K}from"./VForm-T64oMOy_.js";import{V as O}from"./VContainer-CD8kire9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VList-CeQJG56W.js";import"./VDivider-DnwJDuk2.js";const Q={class:"mb-9"},W={key:1,class:"login__content-success"},X={class:"mb-9"},Z={__name:"login",setup(ee){const{t}=F(),{api:k}=j(),g=$(),y=q(),i=B(),S=D({email:v().required(t("api.userEmailRequired")).test("isEmail",t("api.userEmailInvalid"),o=>L.isEmail(o)),password:v().required(t("api.userPasswordRequired")).min(4,t("api.userPasswordTooShort")).max(20,t("api.userPasswordTooLong"))}),{handleSubmit:P,isSubmitting:f}=G({validationSchema:S}),u=w("email"),c=w("password"),E=P(async o=>{var s,l;try{const{data:n}=await k.post("/user/login",{email:o.email,password:o.password});i.login(n.result),g({text:t("login.success"),snackbarProps:{color:"green"}}),setTimeout(()=>{y.push("/")},1e3)}catch(n){console.log(n),g({text:t("api."+(((l=(s=n.response)==null?void 0:s.data)==null?void 0:l.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(o,s)=>(d(),h(M,null,[a(O,{fluid:"",class:"px-0",style:{"max-width":"1440px"}},{default:r(()=>[a(H,null,{default:r(()=>[a(x,{class:"pa-0 mt-16 pt-16",sm:"6",md:"6",lg:"6",xl:"6"},{default:r(()=>[a(C,{src:A,"max-width":744,height:744,cover:""})]),_:1}),a(x,{cols:"9",class:"pa-0 mt-16 pt-3 mb-16 pb-9",sm:"6",md:"6",lg:"6",xl:"6"},{default:r(()=>[a(J,{height:850,"max-width":650,elevation:9,rounded:"",class:T(["login__content",["d-flex","flex-column","justify-center","bg-black",{"align-center":e(i).token}]])},{default:r(()=>[e(i).token?V("",!0):(d(),z(K,{key:0,disabled:e(f),onSubmit:R(e(E),["prevent"]),class:"px-12"},{default:r(()=>[m("h1",Q,p(o.$t("nav.login")),1),s[2]||(s[2]=m("span",{style:{"font-size":"20px","font-weight":"bold"}},"Email",-1)),a(b,{modelValue:e(u).value.value,"onUpdate:modelValue":s[0]||(s[0]=l=>e(u).value.value=l),"error-messages":e(u).errorMessage.value,placeholder:o.$t("user.loginPlaceholder"),counter:"",variant:"outlined",class:"mb-2 mt-3"},null,8,["modelValue","error-messages","placeholder"]),s[3]||(s[3]=m("span",{style:{"font-size":"20px","font-weight":"bold"}},"Password",-1)),a(b,{modelValue:e(c).value.value,"onUpdate:modelValue":s[1]||(s[1]=l=>e(c).value.value=l),type:"password","error-messages":e(c).errorMessage.value,placeholder:o.$t("user.passwordPlaceholder"),minlength:"4",maxlength:"20",counter:"",variant:"outlined",class:"mb-5 mt-3"},null,8,["modelValue","error-messages","placeholder"]),a(I,{loading:e(f),type:"submit",color:"orange",class:"w-100 login__form-button",variant:"outlined",height:"58"},{default:r(()=>[N(p(e(t)("login.submit")),1)]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"])),e(i).token?(d(),h("div",W,[m("h1",X,p(o.$t("login.success")),1),a(U,{class:"mb-5 login__content-success-icon",color:"success",icon:"mdi-check-circle",size:"112"})])):V("",!0)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),a(Y)],64))}};typeof _=="function"&&_(Z);export{Z as default};
