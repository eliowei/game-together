import{u as F,i as $,c as q,a as z,n as d,f as h,g as a,h as r,X as B,aY as C,j as e,k as T,q as m,v as p,ar as b,V as I,t as N,aA as R,m as V,z as A,F as M,A as U}from"./index-Dm4GjeRj.js";import{_ as j}from"./swiper-2-b8GkgFeR.js";import{c as D,a as v,u as G,e as w}from"./index.esm-CyyKtpWn.js";import{v as L}from"./index-nrMYJHBM.js";import X from"./GroupFooter-CeNy3hxn.js";import{b as _}from"./route-block-B_A1xBdJ.js";import{V as Y,a as x}from"./VRow-nSsvLguS.js";import{V as H}from"./VSheet-CbaVSDac.js";import{V as J}from"./VForm-BpjDXL8I.js";import{V as K}from"./VContainer-Ch3yX1s4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VList-sRP_dp5u.js";import"./VDivider-lJyuuRFq.js";const O={class:"mb-9"},Q={key:1,class:"login__content-success"},W={class:"mb-9"},Z={__name:"login",setup(ee){const{t}=F(),{api:k}=U(),g=$(),y=q(),i=z(),S=D({email:v().required(t("api.userEmailRequired")).test("isEmail",t("api.userEmailInvalid"),o=>L.isEmail(o)),password:v().required(t("api.userPasswordRequired")).min(4,t("api.userPasswordTooShort")).max(20,t("api.userPasswordTooLong"))}),{handleSubmit:P,isSubmitting:f}=G({validationSchema:S}),u=w("email"),c=w("password"),E=P(async o=>{var s,l;try{const{data:n}=await k.post("/user/login",{email:o.email,password:o.password});i.login(n.result),g({text:t("login.success"),snackbarProps:{color:"green"}}),setTimeout(()=>{y.push("/")},1e3)}catch(n){console.log(n),g({text:t("api."+(((l=(s=n.response)==null?void 0:s.data)==null?void 0:l.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(o,s)=>(d(),h(M,null,[a(K,{fluid:"",class:"px-0",style:{"max-width":"1440px"}},{default:r(()=>[a(Y,null,{default:r(()=>[a(x,{class:"pa-0 mt-16 pt-16",sm:"6",md:"6",lg:"6",xl:"6"},{default:r(()=>[a(B,{src:j,"max-width":744,height:744,cover:""})]),_:1}),a(x,{cols:"9",class:"pa-0 mt-16 pt-3 mb-16 pb-9",sm:"6",md:"6",lg:"6",xl:"6"},{default:r(()=>[a(H,{height:850,"max-width":650,elevation:9,rounded:"",class:C(["login__content",["d-flex","flex-column","justify-center","bg-black",{"align-center":e(i).token}]])},{default:r(()=>[e(i).token?V("",!0):(d(),T(J,{key:0,disabled:e(f),onSubmit:R(e(E),["prevent"]),class:"px-12"},{default:r(()=>[m("h1",O,p(o.$t("nav.login")),1),s[2]||(s[2]=m("span",{style:{"font-size":"20px","font-weight":"bold"}},"Email",-1)),a(b,{modelValue:e(u).value.value,"onUpdate:modelValue":s[0]||(s[0]=l=>e(u).value.value=l),"error-messages":e(u).errorMessage.value,placeholder:o.$t("user.loginPlaceholder"),counter:"",variant:"outlined",class:"mb-2 mt-3"},null,8,["modelValue","error-messages","placeholder"]),s[3]||(s[3]=m("span",{style:{"font-size":"20px","font-weight":"bold"}},"Password",-1)),a(b,{modelValue:e(c).value.value,"onUpdate:modelValue":s[1]||(s[1]=l=>e(c).value.value=l),type:"password","error-messages":e(c).errorMessage.value,placeholder:o.$t("user.passwordPlaceholder"),minlength:"4",maxlength:"20",counter:"",variant:"outlined",class:"mb-5 mt-3"},null,8,["modelValue","error-messages","placeholder"]),a(I,{loading:e(f),type:"submit",color:"orange",class:"w-100 login__form-button",variant:"outlined",height:"58"},{default:r(()=>[N(p(e(t)("login.submit")),1)]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"])),e(i).token?(d(),h("div",Q,[m("h1",W,p(o.$t("login.success")),1),a(A,{class:"mb-5 login__content-success-icon",color:"success",icon:"mdi-check-circle",size:"112"})])):V("",!0)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),a(X)],64))}};typeof _=="function"&&_(Z);export{Z as default};
