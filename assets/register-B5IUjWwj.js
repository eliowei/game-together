import{u as E,i as F,c as M,r as T,o as h,f as k,g as r,h as l,U as I,n as R,k as U,q as n,v as w,ao as i,j as s,V as B,t as _,x as j,m as P,aq as G,F as L,y as D}from"./index-kplqA9EU.js";import{_ as O}from"./swiper-2-b8GkgFeR.js";import{c as H,a as u,g as J,u as K,e as m}from"./index.esm-CmF7MWRr.js";import{v as V}from"./index-BIaVCSpi.js";import{G as Q}from"./GroupFooter-BKElfR4v.js";import{b as S}from"./route-block-B_A1xBdJ.js";import{V as W,a as q}from"./VRow-8k3taPEr.js";import{V as X}from"./VSheet-lo-bULhW.js";import{V as Y}from"./VForm-D-_g-3zG.js";import{V as Z}from"./VContainer-BOT34CKT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VList-BMkkM_qb.js";import"./VDivider-DqpHPgfc.js";const ee={class:"mb-4"},se={key:1,class:"register__content-success"},ae={class:"mb-9"},oe={__name:"register",setup(re){const{t:o}=E(),{api:A}=D(),b=F(),C=M(),d=T(!1),$=H({name:u().required(o("api.userNameRequired")).test("isAlphanumeric",o("api.userNameInvalid"),a=>V.isAlphanumeric(a)),account:u().required(o("api.userAccountRequired")).min(4,o("api.userAccountTooShort")).max(20,o("api.userAccountTooLong")).test("isAlphanumeric",o("api.userAccountInvalid"),a=>V.isAlphanumeric(a)),email:u().required(o("api.userEmailRequired")).test("isEmail",o("api.userEmailInvalid"),a=>V.isEmail(a)),password:u().required(o("api.userPasswordRequired")).min(4,o("api.userPasswordTooShort")).max(20,o("api.userPasswordTooLong")),passwordConfirm:u().oneOf([J("password")],o("api.userPasswordNotMatch"))}),{handleSubmit:N,isSubmitting:x}=K({validationSchema:$}),c=m("name"),p=m("account"),g=m("email"),f=m("password"),v=m("passwordConfirm"),z=N(async a=>{var e,t;try{await A.post("/user",{name:a.name,account:a.account,email:a.email,password:a.password}),b({text:o("register.success"),snackbarProps:{color:"green"}}),d.value=!0,setTimeout(()=>{C.push("/login")},1e3)}catch(y){console.log(y),b({text:o("api."+(((t=(e=y.response)==null?void 0:e.data)==null?void 0:t.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(a,e)=>(h(),k(L,null,[r(Z,{fluid:"",class:"px-0",style:{"max-width":"1440px"}},{default:l(()=>[r(W,null,{default:l(()=>[r(q,{class:"pa-0 mt-16 pt-16",sm:"6",md:"6",lg:"6",xl:"6"},{default:l(()=>[r(I,{src:O,"max-width":744,height:744,cover:""})]),_:1}),r(q,{class:"pa-0 mt-16 pt-3 mb-16 pb-9",cols:"9",sm:"6",md:"6",lg:"6",xl:"6"},{default:l(()=>[r(X,{height:850,"max-width":650,elevation:9,rounded:"",class:R(["register__content",["d-flex","flex-column","justify-center","bg-black",{"align-center":d.value}]])},{default:l(()=>[d.value?P("",!0):(h(),U(Y,{key:0,disabled:s(x),onSubmit:j(s(z),["prevent"]),class:"px-12"},{default:l(()=>[n("h1",ee,w(a.$t("nav.register")),1),e[5]||(e[5]=n("span",{style:{"font-size":"20px","font-weight":"bold"}},"Nickname",-1)),r(i,{modelValue:s(c).value.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s(c).value.value=t),"error-messages":s(c).errorMessage.value,placeholder:a.$t("user.namePlaceholder"),counter:"",variant:"outlined",class:"mt-3"},null,8,["modelValue","error-messages","placeholder"]),e[6]||(e[6]=n("span",{style:{"font-size":"20px","font-weight":"bold"}},"Account",-1)),r(i,{modelValue:s(p).value.value,"onUpdate:modelValue":e[1]||(e[1]=t=>s(p).value.value=t),"error-messages":s(p).errorMessage.value,placeholder:a.$t("user.accountPlaceholder"),minlength:"4",maxlength:"20",counter:"",variant:"outlined",class:"mt-3"},null,8,["modelValue","error-messages","placeholder"]),e[7]||(e[7]=n("span",{style:{"font-size":"20px","font-weight":"bold"}},"Email",-1)),r(i,{modelValue:s(g).value.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s(g).value.value=t),"error-messages":s(g).errorMessage.value,placeholder:a.$t("user.loginPlaceholder"),counter:"",variant:"outlined",class:"mt-3"},null,8,["modelValue","error-messages","placeholder"]),e[8]||(e[8]=n("span",{style:{"font-size":"20px","font-weight":"bold"}},"Password",-1)),r(i,{modelValue:s(f).value.value,"onUpdate:modelValue":e[3]||(e[3]=t=>s(f).value.value=t),type:"password","error-messages":s(f).errorMessage.value,placeholder:a.$t("user.passwordPlaceholder"),minlength:"4",maxlength:"20",counter:"",variant:"outlined",class:"mt-3"},null,8,["modelValue","error-messages","placeholder"]),e[9]||(e[9]=n("span",{style:{"font-size":"20px","font-weight":"bold"}},"Confrim Password",-1)),r(i,{modelValue:s(v).value.value,"onUpdate:modelValue":e[4]||(e[4]=t=>s(v).value.value=t),type:"password","error-messages":s(v).errorMessage.value,placeholder:a.$t("user.passwordConfirmPlaceholder"),minlength:"4",maxlength:"20",counter:"",variant:"outlined",class:"mb-5 mt-3"},null,8,["modelValue","error-messages","placeholder"]),r(B,{loading:s(x),type:"submit",color:"orange",class:"w-100 register__form-button",variant:"outlined",height:"58"},{default:l(()=>[_(w(s(o)("register.submit")),1)]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"])),d.value?(h(),k("div",se,[n("h1",ae,w(a.$t("register.success")),1),r(G,{class:"mb-5 register__content-success-icon",color:"success",icon:"mdi-check-circle",size:"112"})])):P("",!0)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),r(Q)],64))}};typeof S=="function"&&S(oe);export{oe as default};
