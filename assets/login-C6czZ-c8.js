import{u as F,i as q,c as $,a as B,o as d,f as h,g as a,h as r,U as C,n as T,j as e,k as z,q as m,v as p,ao as b,V as I,t as N,x as R,m as V,aq as U,F as M,y as j}from"./index-CyuX9xwv.js";import{_ as G}from"./swiper-2-b8GkgFeR.js";import{c as A,a as v,u as D,e as w}from"./index.esm-BGZvW259.js";import{v as L}from"./index-B4vjCY_3.js";import{G as H}from"./GroupFooter-CVhHgXoA.js";import{b as _}from"./route-block-B_A1xBdJ.js";import{V as J,a as x}from"./VRow-BnG7Nqe_.js";import{V as K}from"./VSheet-C_wbC7GT.js";import{V as O}from"./VForm-D6SD0_Bj.js";import{V as Q}from"./VContainer-Cn9VpIuw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VList-kRsTIm-M.js";import"./VDivider-D9JeiQ2P.js";const W={class:"mb-9"},X={key:1,class:"login__content-success"},Y={class:"mb-9"},Z={__name:"login",setup(ee){const{t}=F(),{api:k}=j(),g=q(),y=$(),i=B(),S=A({email:v().required(t("api.userEmailRequired")).test("isEmail",t("api.userEmailInvalid"),o=>L.isEmail(o)),password:v().required(t("api.userPasswordRequired")).min(4,t("api.userPasswordTooShort")).max(20,t("api.userPasswordTooLong"))}),{handleSubmit:P,isSubmitting:f}=D({validationSchema:S}),u=w("email"),c=w("password"),E=P(async o=>{var s,l;try{const{data:n}=await k.post("/user/login",{email:o.email,password:o.password});i.login(n.result),g({text:t("login.success"),snackbarProps:{color:"green"}}),setTimeout(()=>{y.push("/")},1e3)}catch(n){console.log(n),g({text:t("api."+(((l=(s=n.response)==null?void 0:s.data)==null?void 0:l.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(o,s)=>(d(),h(M,null,[a(Q,{fluid:"",class:"px-0",style:{"max-width":"1440px"}},{default:r(()=>[a(J,null,{default:r(()=>[a(x,{class:"pa-0 mt-16 pt-16",sm:"6",md:"6",lg:"6",xl:"6"},{default:r(()=>[a(C,{src:G,"max-width":744,height:744,cover:""})]),_:1}),a(x,{cols:"9",class:"pa-0 mt-16 pt-3 mb-16 pb-9",sm:"6",md:"6",lg:"6",xl:"6"},{default:r(()=>[a(K,{height:850,"max-width":650,elevation:9,rounded:"",class:T(["login__content",["d-flex","flex-column","justify-center","bg-black",{"align-center":e(i).token}]])},{default:r(()=>[e(i).token?V("",!0):(d(),z(O,{key:0,disabled:e(f),onSubmit:R(e(E),["prevent"]),class:"px-12"},{default:r(()=>[m("h1",W,p(o.$t("nav.login")),1),s[2]||(s[2]=m("span",{style:{"font-size":"20px","font-weight":"bold"}},"Email",-1)),a(b,{modelValue:e(u).value.value,"onUpdate:modelValue":s[0]||(s[0]=l=>e(u).value.value=l),"error-messages":e(u).errorMessage.value,placeholder:o.$t("user.loginPlaceholder"),counter:"",variant:"outlined",class:"mb-2 mt-3"},null,8,["modelValue","error-messages","placeholder"]),s[3]||(s[3]=m("span",{style:{"font-size":"20px","font-weight":"bold"}},"Password",-1)),a(b,{modelValue:e(c).value.value,"onUpdate:modelValue":s[1]||(s[1]=l=>e(c).value.value=l),type:"password","error-messages":e(c).errorMessage.value,placeholder:o.$t("user.passwordPlaceholder"),minlength:"4",maxlength:"20",counter:"",variant:"outlined",class:"mb-5 mt-3"},null,8,["modelValue","error-messages","placeholder"]),a(I,{loading:e(f),type:"submit",color:"orange",class:"w-100 login__form-button",variant:"outlined",height:"58"},{default:r(()=>[N(p(e(t)("login.submit")),1)]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"])),e(i).token?(d(),h("div",X,[m("h1",Y,p(o.$t("login.success")),1),a(U,{class:"mb-5 login__content-success-icon",color:"success",icon:"mdi-check-circle",size:"112"})])):V("",!0)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),a(H)],64))}};typeof _=="function"&&_(Z);export{Z as default};
