import{u as E,i as F,c as M,r as T,n as h,f as k,g as r,h as l,X as I,aY as R,k as B,q as n,v as w,ar as i,j as s,V as U,t as _,aA as j,m as P,z as L,F as D,A as G}from"./index-Bq56h7iZ.js";import{_ as O}from"./swiper-2-b8GkgFeR.js";import{c as X,a as u,g as Y,u as H,e as m}from"./index.esm-Cny-I-8L.js";import{v as V}from"./index-DXDUO1Lo.js";import J from"./GroupFooter-BE5Eg5mf.js";import{b as A}from"./route-block-B_A1xBdJ.js";import{V as K,a as S}from"./VRow-B-Ai7dIa.js";import{V as Q}from"./VSheet-DF-2CseI.js";import{V as W}from"./VForm-D4ZF-hWA.js";import{V as Z}from"./VContainer-Dp8PARB0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VList-Bmhx1MvN.js";import"./VDivider-Bb63vThF.js";const ee={class:"mb-4"},se={key:1,class:"register__content-success"},ae={class:"mb-9"},oe={__name:"register",setup(re){const{t:o}=E(),{api:C}=G(),b=F(),$=M(),d=T(!1),q=X({name:u().required(o("api.userNameRequired")).test("isAlphanumeric",o("api.userNameInvalid"),a=>V.isAlphanumeric(a)),account:u().required(o("api.userAccountRequired")).min(4,o("api.userAccountTooShort")).max(20,o("api.userAccountTooLong")).test("isAlphanumeric",o("api.userAccountInvalid"),a=>V.isAlphanumeric(a)),email:u().required(o("api.userEmailRequired")).test("isEmail",o("api.userEmailInvalid"),a=>V.isEmail(a)),password:u().required(o("api.userPasswordRequired")).min(4,o("api.userPasswordTooShort")).max(20,o("api.userPasswordTooLong")),passwordConfirm:u().oneOf([Y("password")],o("api.userPasswordNotMatch"))}),{handleSubmit:z,isSubmitting:x}=H({validationSchema:q}),c=m("name"),p=m("account"),g=m("email"),f=m("password"),v=m("passwordConfirm"),N=z(async a=>{var e,t;try{await C.post("/user",{name:a.name,account:a.account,email:a.email,password:a.password}),b({text:o("register.success"),snackbarProps:{color:"green"}}),d.value=!0,setTimeout(()=>{$.push("/login")},1e3)}catch(y){console.log(y),b({text:o("api."+(((t=(e=y.response)==null?void 0:e.data)==null?void 0:t.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(a,e)=>(h(),k(D,null,[r(Z,{fluid:"",class:"px-0",style:{"max-width":"1440px"}},{default:l(()=>[r(K,null,{default:l(()=>[r(S,{class:"pa-0 mt-16 pt-16",sm:"6",md:"6",lg:"6",xl:"6"},{default:l(()=>[r(I,{src:O,"max-width":744,height:744,cover:""})]),_:1}),r(S,{class:"pa-0 mt-16 pt-3 mb-16 pb-9",cols:"9",sm:"6",md:"6",lg:"6",xl:"6"},{default:l(()=>[r(Q,{height:850,"max-width":650,elevation:9,rounded:"",class:R(["register__content",["d-flex","flex-column","justify-center","bg-black",{"align-center":d.value}]])},{default:l(()=>[d.value?P("",!0):(h(),B(W,{key:0,disabled:s(x),onSubmit:j(s(N),["prevent"]),class:"px-12"},{default:l(()=>[n("h1",ee,w(a.$t("nav.register")),1),e[5]||(e[5]=n("span",{style:{"font-size":"20px","font-weight":"bold"}},"Nickname",-1)),r(i,{modelValue:s(c).value.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s(c).value.value=t),"error-messages":s(c).errorMessage.value,placeholder:a.$t("user.namePlaceholder"),counter:"",variant:"outlined",class:"mt-3"},null,8,["modelValue","error-messages","placeholder"]),e[6]||(e[6]=n("span",{style:{"font-size":"20px","font-weight":"bold"}},"Account",-1)),r(i,{modelValue:s(p).value.value,"onUpdate:modelValue":e[1]||(e[1]=t=>s(p).value.value=t),"error-messages":s(p).errorMessage.value,placeholder:a.$t("user.accountPlaceholder"),minlength:"4",maxlength:"20",counter:"",variant:"outlined",class:"mt-3"},null,8,["modelValue","error-messages","placeholder"]),e[7]||(e[7]=n("span",{style:{"font-size":"20px","font-weight":"bold"}},"Email",-1)),r(i,{modelValue:s(g).value.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s(g).value.value=t),"error-messages":s(g).errorMessage.value,placeholder:a.$t("user.loginPlaceholder"),counter:"",variant:"outlined",class:"mt-3"},null,8,["modelValue","error-messages","placeholder"]),e[8]||(e[8]=n("span",{style:{"font-size":"20px","font-weight":"bold"}},"Password",-1)),r(i,{modelValue:s(f).value.value,"onUpdate:modelValue":e[3]||(e[3]=t=>s(f).value.value=t),type:"password","error-messages":s(f).errorMessage.value,placeholder:a.$t("user.passwordPlaceholder"),minlength:"4",maxlength:"20",counter:"",variant:"outlined",class:"mt-3"},null,8,["modelValue","error-messages","placeholder"]),e[9]||(e[9]=n("span",{style:{"font-size":"20px","font-weight":"bold"}},"Confrim Password",-1)),r(i,{modelValue:s(v).value.value,"onUpdate:modelValue":e[4]||(e[4]=t=>s(v).value.value=t),type:"password","error-messages":s(v).errorMessage.value,placeholder:a.$t("user.passwordConfirmPlaceholder"),minlength:"4",maxlength:"20",counter:"",variant:"outlined",class:"mb-5 mt-3"},null,8,["modelValue","error-messages","placeholder"]),r(U,{loading:s(x),type:"submit",color:"orange",class:"w-100 register__form-button",variant:"outlined",height:"58"},{default:l(()=>[_(w(s(o)("register.submit")),1)]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"])),d.value?(h(),k("div",se,[n("h1",ae,w(a.$t("register.success")),1),r(L,{class:"mb-5 register__content-success-icon",color:"success",icon:"mdi-check-circle",size:"112"})])):P("",!0)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),r(J)],64))}};typeof A=="function"&&A(oe);export{oe as default};
