import{u as F,i as $,k as q,a as z,m as c,c as h,d as a,e as r,W as B,n as C,f as e,g as T,x as I,q as m,v as p,aw as b,V as N,t as R,j as V,at as M,F as U,z as j}from"./index-DGDPAFvN.js";import{_ as A}from"./swiper-2-b8GkgFeR.js";import{c as D,d as w,u as G,e as v}from"./index.esm-BKlOWWEB.js";import{v as L}from"./index-CZgOSDs4.js";import W from"./GroupFooter-CNXRydtP.js";import{b as _}from"./route-block-B_A1xBdJ.js";import{V as H,a as x}from"./VRow-B0E1-WBI.js";import{V as J}from"./VSheet-D7DIbUyN.js";import{V as K}from"./VForm-Ce9ka6A1.js";import{V as O}from"./VContainer-DRMGm2hx.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VList-D0O-dBcK.js";import"./VDivider-C7U-UNkw.js";const Q={class:"mb-9"},X={key:1,class:"login__content-success"},Y={class:"mb-9"},Z={__name:"login",setup(ee){const{t}=F(),{api:k}=j(),g=$(),y=q(),i=z(),S=D({email:w().required(t("api.userEmailRequired")).test("isEmail",t("api.userEmailInvalid"),o=>L.isEmail(o)),password:w().required(t("api.userPasswordRequired")).min(4,t("api.userPasswordTooShort")).max(20,t("api.userPasswordTooLong"))}),{handleSubmit:P,isSubmitting:f}=G({validationSchema:S}),u=v("email"),d=v("password"),E=P(async o=>{var s,l;try{const{data:n}=await k.post("/user/login",{email:o.email,password:o.password});i.login(n.result),g({text:t("login.success"),snackbarProps:{color:"green"}}),setTimeout(()=>{y.push("/")},1e3)}catch(n){console.log(n),g({text:t("api."+(((l=(s=n.response)==null?void 0:s.data)==null?void 0:l.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(o,s)=>(c(),h(U,null,[a(O,{fluid:"",class:"px-0",style:{"max-width":"1440px"}},{default:r(()=>[a(H,null,{default:r(()=>[a(x,{class:"pa-0 mt-16 pt-16",sm:"6",md:"6",lg:"6",xl:"6"},{default:r(()=>[a(B,{src:A,"max-width":744,height:744,cover:""})]),_:1}),a(x,{cols:"9",class:"pa-0 mt-16 pt-3 mb-16 pb-9",sm:"6",md:"6",lg:"6",xl:"6"},{default:r(()=>[a(J,{height:850,"max-width":650,elevation:9,rounded:"",class:C(["login__content",["d-flex","flex-column","justify-center","bg-black",{"align-center":e(i).token}]])},{default:r(()=>[e(i).token?V("",!0):(c(),T(K,{key:0,disabled:e(f),onSubmit:I(e(E),["prevent"]),class:"px-12"},{default:r(()=>[m("h1",Q,p(o.$t("nav.login")),1),s[2]||(s[2]=m("span",{style:{"font-size":"20px","font-weight":"bold"}},"Email",-1)),a(b,{modelValue:e(u).value.value,"onUpdate:modelValue":s[0]||(s[0]=l=>e(u).value.value=l),"error-messages":e(u).errorMessage.value,placeholder:o.$t("user.loginPlaceholder"),counter:"",variant:"outlined",class:"mb-2 mt-3"},null,8,["modelValue","error-messages","placeholder"]),s[3]||(s[3]=m("span",{style:{"font-size":"20px","font-weight":"bold"}},"Password",-1)),a(b,{modelValue:e(d).value.value,"onUpdate:modelValue":s[1]||(s[1]=l=>e(d).value.value=l),type:"password","error-messages":e(d).errorMessage.value,placeholder:o.$t("user.passwordPlaceholder"),minlength:"4",maxlength:"20",counter:"",variant:"outlined",class:"mb-5 mt-3"},null,8,["modelValue","error-messages","placeholder"]),a(N,{loading:e(f),type:"submit",color:"orange",class:"w-100 login__form-button",variant:"outlined",height:"58"},{default:r(()=>[R(p(e(t)("login.submit")),1)]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"])),e(i).token?(c(),h("div",X,[m("h1",Y,p(o.$t("login.success")),1),a(M,{class:"mb-5 login__content-success-icon",color:"success",icon:"mdi-check-circle",size:"112"})])):V("",!0)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),a(W)],64))}};typeof _=="function"&&_(Z);export{Z as default};
