import{C as he,b$ as De,w as G,D as ge,q as T,F as re,B as L,G as te,I as Re,b as Me,a5 as ke,S as U,ac as Be,$ as ve,r as ee,c0 as He,y as M,bl as ze,an as Fe,bS as _e,bq as Ne,a1 as qe,o as $e,bT as Ke,d as I,Y as ce,E as Ue,n as je,a4 as de,aa as We,a9 as Xe,aO as Ye,bo as Ge,aT as Ze,a0 as Se,b2 as Je,c1 as Qe,ba as et,c2 as tt,br as me,aw as Ie,at as Pe,c3 as lt,p as nt,c4 as at,X as ot,t as ut,aR as rt,c5 as Ce,c6 as Te,a_ as it,c7 as st,a6 as ct,c8 as dt,aZ as ft}from"./index-DGDPAFvN.js";import{c as vt,V as mt,a as xe,d as pt,m as ht}from"./VList-D0O-dBcK.js";import{V as gt,a as yt}from"./VMenu-BCtUym_C.js";import{V as Vt}from"./VDivider-C7U-UNkw.js";import{V as Ae}from"./VChip-BLJmKbnz.js";const wt=te({renderless:Boolean,...Re()},"VVirtualScrollItem"),bt=he()({name:"VVirtualScrollItem",inheritAttrs:!1,props:wt(),emits:{"update:height":e=>!0},setup(e,s){let{attrs:l,emit:c,slots:a}=s;const{resizeRef:m,contentRect:p}=De(void 0,"border");G(()=>{var n;return(n=p.value)==null?void 0:n.height},n=>{n!=null&&c("update:height",n)}),ge(()=>{var n,i;return e.renderless?T(re,null,[(n=a.default)==null?void 0:n.call(a,{itemRef:m})]):T("div",L({ref:m,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(i=a.default)==null?void 0:i.call(a)])})}}),kt=-1,St=1,pe=100,It=te({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function Pt(e,s){const l=Me(),c=U(0);ke(()=>{c.value=parseFloat(e.itemHeight||0)});const a=U(0),m=U(Math.ceil((parseInt(e.height)||l.height.value)/(c.value||16))||1),p=U(0),n=U(0),i=ee(),P=ee();let u=0;const{resizeRef:z,contentRect:x}=De();ke(()=>{z.value=i.value});const C=M(()=>{var o;return i.value===document.documentElement?l.height.value:((o=x.value)==null?void 0:o.height)||parseInt(e.height)||0}),Z=M(()=>!!(i.value&&P.value&&C.value&&c.value));let y=Array.from({length:s.value.length}),k=Array.from({length:s.value.length});const A=U(0);let h=-1;function E(o){return y[o]||c.value}const j=He(()=>{const o=performance.now();k[0]=0;const f=s.value.length;for(let w=1;w<=f;w++)k[w]=(k[w-1]||0)+E(w-1);A.value=Math.max(A.value,performance.now()-o)},A),O=G(Z,o=>{o&&(O(),u=P.value.offsetTop,j.immediate(),H(),~h&&Fe(()=>{_e&&window.requestAnimationFrame(()=>{ue(h),h=-1})}))});Be(()=>{j.clear()});function le(o,f){const w=y[o],D=c.value;c.value=D?Math.min(c.value,f):f,(w!==f||D!==c.value)&&(y[o]=f,j())}function B(o){o=ve(o,0,s.value.length);const f=Math.floor(o),w=o%1,D=f+1,X=k[f]||0,t=k[D]||X;return X+(t-X)*w}function g(o){return Ct(k,o)}let J=0,W=0,ne=0;G(C,(o,f)=>{H(),o<f&&requestAnimationFrame(()=>{W=0,H()})});let ae=-1;function N(){if(!i.value||!P.value)return;const o=i.value.scrollTop,f=performance.now();f-ne>500?(W=Math.sign(o-J),u=P.value.offsetTop):W=o-J,J=o,ne=f,window.clearTimeout(ae),ae=window.setTimeout(ie,500),H()}function ie(){!i.value||!P.value||(W=0,ne=0,window.clearTimeout(ae),H())}let oe=-1;function H(){cancelAnimationFrame(oe),oe=requestAnimationFrame(fe)}function fe(){if(!i.value||!C.value||!c.value)return;const o=J-u,f=Math.sign(W),w=Math.max(0,o-pe),D=ve(g(w),0,s.value.length),X=o+C.value+pe,t=ve(g(X)+1,D+1,s.value.length);if((f!==kt||D<a.value)&&(f!==St||t>m.value)){const r=B(a.value)-B(D),b=B(t)-B(m.value);Math.max(r,b)>pe?(a.value=D,m.value=t):(D<=0&&(a.value=D),t>=s.value.length&&(m.value=t))}p.value=B(a.value),n.value=B(s.value.length)-B(m.value)}function ue(o){const f=B(o);!i.value||o&&!f?h=o:i.value.scrollTop=f}const Q=M(()=>s.value.slice(a.value,m.value).map((o,f)=>{const w=f+a.value;return{raw:o,index:w,key:ze(o,e.itemKey,w)}}));return G(s,()=>{y=Array.from({length:s.value.length}),k=Array.from({length:s.value.length}),j.immediate(),H()},{deep:1}),{calculateVisibleItems:H,containerRef:i,markerRef:P,computedItems:Q,paddingTop:p,paddingBottom:n,scrollToIndex:ue,handleScroll:N,handleScrollend:ie,handleItemResize:le}}function Ct(e,s){let l=e.length-1,c=0,a=0,m=null,p=-1;if(e[l]<s)return l;for(;c<=l;)if(a=c+l>>1,m=e[a],m>s)l=a-1;else if(m<s)p=a,c=a+1;else return m===s?a:c;return p}const Tt=te({items:{type:Array,default:()=>[]},renderless:Boolean,...It(),...Re(),...Xe()},"VVirtualScroll"),xt=he()({name:"VVirtualScroll",props:Tt(),setup(e,s){let{slots:l}=s;const c=Ne("VVirtualScroll"),{dimensionStyles:a}=We(e),{calculateVisibleItems:m,containerRef:p,markerRef:n,handleScroll:i,handleScrollend:P,handleItemResize:u,scrollToIndex:z,paddingTop:x,paddingBottom:C,computedItems:Z}=Pt(e,de(()=>e.items));return qe(()=>e.renderless,()=>{function y(){var h,E;const A=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";p.value===document.documentElement?(document[A]("scroll",i,{passive:!0}),document[A]("scrollend",P)):((h=p.value)==null||h[A]("scroll",i,{passive:!0}),(E=p.value)==null||E[A]("scrollend",P))}$e(()=>{p.value=Ke(c.vnode.el,!0),y(!0)}),Be(y)}),ge(()=>{const y=Z.value.map(k=>I(bt,{key:k.key,renderless:e.renderless,"onUpdate:height":A=>u(k.index,A)},{default:A=>{var h;return(h=l.default)==null?void 0:h.call(l,{item:k.raw,index:k.index,...A})}}));return e.renderless?T(re,null,[T("div",{ref:n,class:"v-virtual-scroll__spacer",style:{paddingTop:ce(x.value)}},null),y,T("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ce(C.value)}},null)]):T("div",{ref:p,class:je(["v-virtual-scroll",e.class]),onScrollPassive:i,onScrollend:P,style:Ue([a.value,e.style])},[T("div",{ref:n,class:"v-virtual-scroll__container",style:{paddingTop:ce(x.value),paddingBottom:ce(C.value)}},[y])])}),{calculateVisibleItems:m,scrollToIndex:z}}});function At(e,s){const l=U(!1);let c;function a(n){cancelAnimationFrame(c),l.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{l.value=!1})})}async function m(){await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>{if(l.value){const i=G(l,()=>{i(),n()})}else n()})}async function p(n){var u,z;if(n.key==="Tab"&&((u=s.value)==null||u.focus()),!["PageDown","PageUp","Home","End"].includes(n.key))return;const i=(z=e.value)==null?void 0:z.$el;if(!i)return;(n.key==="Home"||n.key==="End")&&i.scrollTo({top:n.key==="Home"?0:i.scrollHeight,behavior:"smooth"}),await m();const P=i.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(n.key==="PageDown"||n.key==="Home"){const x=i.getBoundingClientRect().top;for(const C of P)if(C.getBoundingClientRect().top>=x){C.focus();break}}else{const x=i.getBoundingClientRect().bottom;for(const C of[...P].reverse())if(C.getBoundingClientRect().bottom<=x){C.focus();break}}}return{onScrollPassive:a,onKeydown:p}}const Dt=te({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function Rt(e,s){const l=Ye(),c=M(()=>`menu-${l}`),a=de(()=>Ge(s)),m=de(()=>c.value);return{menuId:c,ariaExpanded:a,ariaControls:m}}const Bt=te({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ft,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...Dt(),...ht({itemChildren:!1})},"Select"),Ft=te({...Bt(),...ct(dt({modelValue:null,role:"combobox"}),["validationValue","dirty"]),...it({transition:{component:st}})},"VSelect"),Ht=he()({name:"VSelect",props:Ft(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:l}=s;const{t:c}=Ze(),a=ee(),m=ee(),p=ee(),{items:n,transformIn:i,transformOut:P}=vt(e),u=Se(e,"modelValue",[],t=>i(t===null?[null]:Je(t)),t=>{const r=P(t);return e.multiple?r:r[0]??null}),z=M(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),x=Qe(e),C=et(e),Z=M(()=>u.value.map(t=>t.value)),y=U(!1),k=de(()=>e.closableChips&&!x.isReadonly.value&&!x.isDisabled.value),{InputIcon:A}=tt(e);let h="",E=0,j;const O=M(()=>e.hideSelected?n.value.filter(t=>!u.value.some(r=>(e.valueComparator||me)(r,t))):n.value),le=M(()=>e.hideNoData&&!O.value.length||x.isReadonly.value||x.isDisabled.value),B=Se(e,"menu"),g=M({get:()=>B.value,set:t=>{var r;B.value&&!t&&((r=m.value)!=null&&r.Î¨openChildren.size)||t&&le.value||(B.value=t)}}),{menuId:J,ariaExpanded:W,ariaControls:ne}=Rt(e,g),ae=M(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),N=ee(),ie=At(N,a);function oe(t){e.openOnClear&&(g.value=!0)}function H(){le.value||(g.value=!g.value)}function fe(t){Ce(t)&&ue(t)}function ue(t){var _,Y,V;if(!t.key||x.isReadonly.value)return;if(["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(g.value=!0),["Escape","Tab"].includes(t.key)&&(g.value=!1),e.clearable&&t.key==="Backspace"){t.preventDefault(),u.value=[],oe();return}t.key==="Home"?(_=N.value)==null||_.focus("first"):t.key==="End"&&((Y=N.value)==null||Y.focus("last"));const r=1e3;if(!Ce(t))return;const b=performance.now();b-j>r&&(h="",E=0),h+=t.key.toLowerCase(),j=b;const q=O.value;function $(){let v=R();return v||h.at(-1)===h.at(-2)&&(h=h.slice(0,-1),E++,v=R(),v)||(E=0,v=R(),v)?v:(h=t.key.toLowerCase(),R())}function R(){for(let v=E;v<q.length;v++){const S=q[v];if(S.title.toLowerCase().startsWith(h))return[S,v]}}const K=$();if(!K)return;const[d,F]=K;E=F,(V=N.value)==null||V.focus(F),e.multiple||(u.value=[d])}function Q(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const b=u.value.findIndex($=>(e.valueComparator||me)($.value,t.value)),q=r??!~b;if(~b){const $=q?[...u.value,t]:[...u.value];$.splice(b,1),u.value=$}else q&&(u.value=[...u.value,t])}else{const b=r!==!1;u.value=b?[t]:[],Fe(()=>{g.value=!1})}}function o(t){var r;(r=N.value)!=null&&r.$el.contains(t.relatedTarget)||(g.value=!1)}function f(){var t;e.eager&&((t=p.value)==null||t.calculateVisibleItems())}function w(){var t;y.value&&((t=a.value)==null||t.focus())}function D(t){y.value=!0}function X(t){if(t==null)u.value=[];else if(Te(a.value,":autofill")||Te(a.value,":-webkit-autofill")){const r=n.value.find(b=>b.title===t);r&&Q(r)}else a.value&&(a.value.value="")}return G(g,()=>{if(!e.hideSelected&&g.value&&u.value.length){const t=O.value.findIndex(r=>u.value.some(b=>(e.valueComparator||me)(b.value,r.value)));_e&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var r;t>=0&&((r=p.value)==null||r.scrollToIndex(t))})}}),G(n,(t,r)=>{g.value||y.value&&e.hideNoData&&!r.length&&t.length&&(g.value=!0)}),ge(()=>{const t=!!(e.chips||l.chip),r=!!(!e.hideNoData||O.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),b=u.value.length>0,q=Ie.filterProps(e),$=b||!y.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return I(Ie,L({ref:a},q,{modelValue:u.value.map(R=>R.props.title).join(", "),name:void 0,"onUpdate:modelValue":X,focused:y.value,"onUpdate:focused":R=>y.value=R,validationValue:u.externalValue,counterValue:z.value,dirty:b,class:["v-select",{"v-select--active-menu":g.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:$,"onClick:clear":oe,"onMousedown:control":H,onBlur:o,onKeydown:ue,"aria-expanded":W.value,"aria-controls":ne.value}),{...l,default:R=>{let{id:K}=R;return T(re,null,[T("select",{hidden:!0,multiple:e.multiple,name:C.fieldName.value},[n.value.map(d=>T("option",{key:d.value,value:d.value,selected:Z.value.includes(d.value)},null))]),I(gt,L({id:J.value,ref:m,modelValue:g.value,"onUpdate:modelValue":d=>g.value=d,activator:"parent",contentClass:"v-select__content",disabled:le.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:f,onAfterLeave:w},ae.value),{default:()=>[r&&I(mt,L({ref:N,selected:Z.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:d=>d.preventDefault(),onKeydown:fe,onFocusin:D,tabindex:"-1",selectable:!!O.value.length,"aria-live":"polite","aria-labelledby":`${K.value}-label`,"aria-multiselectable":e.multiple,color:e.itemColor??e.color},ie,e.listProps),{default:()=>{var d,F,_;return[(d=l["prepend-item"])==null?void 0:d.call(l),!O.value.length&&!e.hideNoData&&(((F=l["no-data"])==null?void 0:F.call(l))??I(xe,{key:"no-data",title:c(e.noDataText)},null)),I(xt,{ref:p,renderless:!0,items:O.value,itemKey:"value"},{default:Y=>{var Ve,we,be;let{item:V,index:v,itemRef:S}=Y;const se=lt(V.props),ye=L(V.props,{ref:S,key:V.value,onClick:()=>Q(V,null),"aria-posinset":v+1,"aria-setsize":O.value.length});return V.type==="divider"?((Ve=l.divider)==null?void 0:Ve.call(l,{props:V.raw,index:v}))??I(Vt,L(V.props,{key:`divider-${v}`}),null):V.type==="subheader"?((we=l.subheader)==null?void 0:we.call(l,{props:V.raw,index:v}))??I(pt,L(V.props,{key:`subheader-${v}`}),null):((be=l.item)==null?void 0:be.call(l,{item:V,index:v,props:ye}))??I(xe,L(ye,{role:"option"}),{prepend:Ee=>{let{isSelected:Oe}=Ee;return T(re,null,[e.multiple&&!e.hideSelected?I(yt,{key:V.value,modelValue:Oe,ripple:!1,tabindex:"-1","aria-hidden":!0,onClick:Le=>Le.preventDefault()},null):void 0,se.prependAvatar&&I(nt,{image:se.prependAvatar},null),se.prependIcon&&I(Pe,{icon:se.prependIcon},null)])}})}}),(_=l["append-item"])==null?void 0:_.call(l)]}})]}),u.value.map((d,F)=>{function _(S){S.stopPropagation(),S.preventDefault(),Q(d,!1)}const Y=L(Ae.filterProps(d.props),{"onClick:close":_,onKeydown(S){S.key!=="Enter"&&S.key!==" "||(S.preventDefault(),S.stopPropagation(),_(S))},onMousedown(S){S.preventDefault(),S.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),V=t?!!l.chip:!!l.selection,v=V?at(t?l.chip({item:d,index:F,props:Y}):l.selection({item:d,index:F})):void 0;if(!(V&&!v))return T("div",{key:d.value,class:"v-select__selection"},[t?l.chip?I(ot,{key:"chip-defaults",defaults:{VChip:{closable:k.value,size:"small",text:d.title}}},{default:()=>[v]}):I(Ae,L({key:"chip",closable:k.value,size:"small",text:d.title,disabled:d.props.disabled},Y),null):v??T("span",{class:"v-select__selection-text"},[d.title,e.multiple&&F<u.value.length-1&&T("span",{class:"v-select__selection-comma"},[ut(",")])])])})])},"append-inner":function(){var F,_;for(var R=arguments.length,K=new Array(R),d=0;d<R;d++)K[d]=arguments[d];return T(re,null,[(F=l["append-inner"])==null?void 0:F.call(l,...K),e.menuIcon?I(Pe,{class:"v-select__menu-icon",color:(_=a.value)==null?void 0:_.fieldIconColor,icon:e.menuIcon,"aria-hidden":!0},null):void 0,e.appendInnerIcon&&I(A,{key:"append-icon",name:"appendInner",color:K[0].iconColor.value},null)])}})}),rt({isFocused:y,menu:g,select:Q},a)}});export{Ht as V};
